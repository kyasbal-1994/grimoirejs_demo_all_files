{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["import { createFilter } from 'rollup-pluginutils';\nimport { resolve as resolveSourceMap } from 'source-map-resolve';\nimport { readFile } from 'fs';\n\nexport default function sourcemaps({ include, exclude } = {}) {\n  const filter = createFilter(include, exclude);\n\n  return {\n    name: 'sourcemaps',\n\n    load(id) {\n      if (!filter(id)) {\n        return null;\n      }\n\n      return new Promise(resolve => {\n        readFile(id, 'utf8', (err, code) => {\n          if (err) {\n            // Failed reading file, let the next plugin deal with it\n            resolve(null);\n          } else {\n            resolveSourceMap(code, id, readFile, (err, sourceMap) => {\n              if (err || sourceMap === null) {\n                // Either something went wrong, or there was no source map\n                resolve(code);\n              } else {\n                const { map, sourcesContent } = sourceMap;\n                map.sourcesContent = sourcesContent;\n                resolve({ code, map });\n              }\n            });\n          }\n        });\n      });\n    },\n  };\n}\n"],"names":["sourcemaps","include","exclude","filter","createFilter","id","Promise","err","code","readFile","sourceMap","map","sourcesContent"],"mappings":";;;;;;AAIe,SAASA,UAAT,GAA+C;mEAAJ,EAAI;;MAAzBC,OAAyB,QAAzBA,OAAyB;MAAhBC,OAAgB,QAAhBA,OAAgB;;MACtDC,SAASC,+BAAaH,OAAb,EAAsBC,OAAtB,CAAf;;SAEO;UACC,YADD;;QAAA,gBAGAG,EAHA,EAGI;UACH,CAACF,OAAOE,EAAP,CAAL,EAAiB;eACR,IAAP;;;aAGK,IAAIC,OAAJ,CAAY,sBAAW;oBACnBD,EAAT,EAAa,MAAb,EAAqB,UAACE,GAAD,EAAMC,IAAN,EAAe;cAC9BD,GAAJ,EAAS;;uBAEC,IAAR;WAFF,MAGO;qCACYC,IAAjB,EAAuBH,EAAvB,EAA2BI,WAA3B,EAAqC,UAACF,GAAD,EAAMG,SAAN,EAAoB;kBACnDH,OAAOG,cAAc,IAAzB,EAA+B;;2BAErBF,IAAR;eAFF,MAGO;oBACGG,GADH,GAC2BD,SAD3B,CACGC,GADH;oBACQC,cADR,GAC2BF,SAD3B,CACQE,cADR;;oBAEDA,cAAJ,GAAqBA,cAArB;2BACQ,EAAEJ,UAAF,EAAQG,QAAR,EAAR;;aAPJ;;SALJ;OADK,CAAP;;GARJ;;;"}