import { Color4 } from "grimoirejs-math";
import Component from "grimoirejs/lib/Node/Component";
export default class RendererManagerComponent extends Component {
    $mount() {
        this.gl = this.companion.get("gl");
    }
    $treeInitialized() {
        this.tree("goml")("LOOPMANAGER").get().register(this.onloop.bind(this), 1000);
        this.gl.enable(WebGLRenderingContext.DEPTH_TEST);
        this.gl.enable(WebGLRenderingContext.CULL_FACE);
    }
    onloop() {
        if (this.enabled) {
            const c = this.attributes.get("bgColor").Value;
            this.gl.clearColor(c.R, c.G, c.B, c.A);
            this.gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT | WebGLRenderingContext.DEPTH_BUFFER_BIT);
            this.node.broadcastMessage(1, "renderScene");
        }
    }
}
RendererManagerComponent.attributes = {
    bgColor: {
        defaultValue: new Color4(0, 0, 0, 1),
        converter: "Color4"
    }
};
//# sourceMappingURL=RendererManagerComponent.js.map